$(document).ready(function(){let a,b=0,c=$("#table_all_reservations").DataTable({data:reservations,responsive:!0,autoWidth:!0,order:[[1,"desc"]],fixedHeader:{header:!0,footer:!0},columnDefs:[{targets:[0],data:"user_first_name",render:function(a,b,c){return a+" "+c.user_name}},{targets:[1],data:"reservation_started_at",render:function(a,b){if("sort"===b){let b=a.split("."),c=new Date(b[2],b[1],b[0],0,0,0);return c.getTime()}return a}},{targets:[2],data:"reservation_ended_at",render:function(a,b){if("sort"===b){let b=a.split("."),c=new Date(b[2],b[1],b[0],0,0,0);return c.getTime()}return a}},{targets:[3],data:"reservation_nights"},{targets:[4],data:null,render:function(a){let b=0;return $.each(a.guests,function(a,c){b+=c.guest_night*c.guest_number*parseFloat(c.guest_tax)}),0==b?"-":b.toFixed(2)}},{targets:[5],data:null,render:function(a){let b=0;return $.each(a.guests,function(a,c){b+=c.guest_number}),0===b?"-":b}},{targets:[6],data:"reservation_bill_sent",render:function(a){return 0===a?"Nein":"Ja"}}],language:{paginate:{first:window.paginationLang.first,previous:window.paginationLang.previous,next:window.paginationLang.next,last:window.paginationLang.last},info:window.paginationLang.info,sLengthMenu:window.paginationLang.length_menu,search:window.langDialog.search}});a=0,$.each($("[id^=\"number_nights_\"]"),function(c,d){let e=$(d).attr("id").split("_")[3],f=$(d).attr("id").split("_")[2];f!==a&&(b=0),a=f,0<parseFloat($("#reservation_guest_price_"+f+"_"+e).val())&&(b+=parseInt($(d).val(),10)*parseFloat($("#reservation_guest_price_"+f+"_"+e).val())*parseInt($("#reservation_guest_num_"+f+"_"+e).val(),10)),$("#price_"+f+"_"+e).val(b.toFixed(2))}),a=0,$.each($("[id^=\"price_\"]"),function(c,d){let e=$(d).attr("id").split("_")[2];e!==a&&(b=0),a=e,b+=parseFloat($(d).val()),$("#reservation_costs_total_"+e).html(b.toFixed(2))})});