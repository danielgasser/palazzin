function clan(){var a=$("#clan_id").val(),b="string"==typeof a&&"0"===a?window.families:window.families[a];$("#family_code").find("optgroup").remove(),$("#family_code").find("option").remove(),"string"==typeof a&&"0"===a?$.each(window.families,function(a,b){$.each(b,function(c,a){$("#family_code").append(new window.Option(a,c))})}):$.each(b,function(c,a){$("#family_code").append(new window.Option(a,c))}),$("#family_code").val(window.family_code)}$(document).ready(function(){clan()}),$(document).on("change","#clan_id",function(){$("#family_code").attr("disabled",!1),clan()}),$(document).on("change","#user_active",function(){let a=$(this).val();$.ajax({url:window.urlTo+"/admin/users/activate",method:"POST",data:{user_id:$("[name=\"id\"]").val(),user_active:a},success:function(){}})}),$(document).on("click","[id^=\"deleteRole_\"]",function(){let a=$(this).attr("id").split("_"),b=a[2],c=a[1];$.ajax({url:window.urlTo+"/admin/users/edit/delete",method:"POST",data:{user_id:b,role_id:c},success:function(){$("#deleteRole_"+c+"_"+b).parent().remove()}})}),$(document).on("click","#edit_add_role",function(a){a.preventDefault(),$.ajax({url:window.urlTo+"/admin/users/addrole",method:"POST",data:{user_id:$("[name=\"id\"]").val(),role_id:$("#role_id").val()},success:function(a){if("false"===$.parseJSON(a)||$.parseJSON(a).hasOwnProperty("error"))return!1;let b=$.parseJSON(a);GlobalFunctions.fillUserRoles(b[0],!0)}})});