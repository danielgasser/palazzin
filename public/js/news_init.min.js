var counter=0,fillPostContent=function(a,b){return"<div id=\"post_"+a.id+"\"><div class=\"row postrow\"><div class=\"col-sm-3 col-md-3 col-xs-2 posts\"><h4>"+a.created_at+"<br><a href=\""+window.urlTo+"user/profile/"+a.user_id+"\">"+a.user_first_name+" "+a.user_name+"</a></h4>"+b+"</div><div class=\"col-sm-9 col-md-9 col-xs-10 post-entry\">"+a.post_text+"</div></div></div>"};$(document).ready(function(){"use strict";CKEDITOR.replace("post_text",{config:{extraPlugins:"uploadimage"}}),$(document).on("click","#close_warning",function(){$(this).children("span").hasClass("glyphicon-chevron-up")?($(this).children("span").removeClass("glyphicon-chevron-up"),$(this).children("span").addClass("glyphicon-chevron-down")):($(this).children("span").removeClass("glyphicon-chevron-down"),$(this).children("span").addClass("glyphicon-chevron-up")),$("#warnings").slideToggle()}),$(document).on("click","#add_post",function(a){a.preventDefault(),$("#newstickerNewPost").slideToggle("slow"),GlobalFunctions.scrollIt("#newsticker",0,"slow"),$("#post_text").val("")}),$(document).on("click","#cancel_new_post",function(a){a.preventDefault(),$("#newstickerNewPost").slideUp("slow"),$("[id^=\"closeComment_\"]").trigger("click"),$("#post_text").val("")}),$(document).on("click","[id^=\"editPost_\"]",function(a){a.preventDefault(),$.ajax({type:"GET",url:"news/getone",data:{id:$(this).attr("id").split("_")[1]},success:function(a){GlobalFunctions.unAuthorized(a),$("#newstickerNewPost").slideDown("slow").promise().always(function(){window.CKEDITOR.instances.post_text.setData(a.post_text)}),$("#post_text").val(a.post_text),$("#id").val(a.id)}})}),$(document).on("click","[id^=\"deletePost_\"]",function(){var a=$(this).attr("id").split("_")[1];$.ajax({type:"POST",url:"news/delete",data:{id:a},success:function(b){GlobalFunctions.unAuthorized(b),$("#post_"+a).remove()}})}),$(document).on("click","#save_new_post",function(a){a.preventDefault(),$("#newstickerNewPost").slideUp("slow"),$("#post_"+$("#id").val()).remove(),$.ajax({type:"POST",url:"news",data:{post_text:window.CKEDITOR.instances.post_text.getData(),id:$("#id").val()},success:function(a){GlobalFunctions.unAuthorized(a);var b,c="",d=a[0][0],e=a.auth;e===d.uid&&(c="<div class=\"tools\"><span id=\"editPost_"+d.id+"\" class=\"glyphicon glyphicon-pencil edit\"></span><span id=\"deletePost_"+d.id+"\" class=\"glyphicon glyphicon-remove edit\"></span></div>"),b=fillPostContent(d,c),$("#newsticker").prepend(b)}})})});