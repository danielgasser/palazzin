var dataCalendarTableOptions={dom:"Bfrtip",buttons:[{extend:"copy",text:"Kopieren",className:"btn btn-default"},{extend:"csv",text:"CSV",className:"btn btn-default"},{extend:"excel",text:"Excel",className:"btn btn-default"},{extend:"pdf",text:"PDF",className:"btn btn-default"},{extend:"print",text:"Drucken",className:"btn btn-default"}],searching:!1,pageLength:12,paging:!1,sortable:!1,ordering:!1,language:{paginate:{first:paginationLang.first,previous:paginationLang.previous,next:paginationLang.next,last:paginationLang.last},info:paginationLang.info,sLengthMenu:paginationLang.length_menu},responsive:!0,autoWidth:!1,fixedHeader:{header:!1,footer:!1}},graphDaySeries=[],prepareDataTable=function(a,b){'use strict';var c,d,e,f,g,h,l=$("#datatable-div"),m="",n="";for(l.html(""),d=1;31>=d;d+=1)e=d+1,31<e&&(e=1),m+="<th style=\"text-align: center; background-color: white !important;\"><h6 style=\"font-size: 16px;\">"+d+"-<br>"+e+"</h6></th>";for(c=0;c<a.length;c+=1)if(h=window.parseInt(a[c],10),void 0!==b[h]){for(l.append("<table autosize=\"1\" width=\"547\" style=\"font-size: 16px !important; border-collapse: collapse; width: 547px\" cellpadding=\"0\" cellspacing=\"0\" id=\"datatable_"+h+"\" class=\"datatable_month table table-stats\"></table><pagebreak />"),g=$("#datatable_"+h),g.append("<thead><tr id=\"datatable-head-year_"+h+"\"></tr><tr id=\"datatable-head_"+h+"\"></tr></thead>"),$("#datatable-head-year_"+h).append("<th colspan=\"32\" style=\"text-align: center;font-weight: bold; height: 40px; background-color: white !important; vertical-align: middle\">"+h+"</th>"),$("#datatable-head_"+h).append("<th style=\"background-color: white !important;\"></th>"),$("#datatable-head_"+h).append(m),g.append("<tbody style=\"\" id=\"year_"+h+"\"></tbody>"),f=1;12>=f;f+=1){for(n="",d=1;31>=d;d+=1)e=d+1,31<e&&(e=1),n+="<td style=\"width: 12px; text-align: center;\" id=\""+h+"_"+GlobalFunctions.smallerThenTen(f)+"_"+GlobalFunctions.smallerThenTen(d)+"\"></td>";$("#year_"+h).append("<tr id=\"theMonth_"+h+"_"+GlobalFunctions.smallerThenTen(f)+"\"><td>"+window.langCalendar[f]+"</td>"+n+"</tr>")}$.fn.DataTable.isDataTable(this)&&g.destroy(),g.DataTable(dataCalendarTableOptions)}},fillTableShort=function(a,b,c){'use strict';var d,e,f,g=0,h=[],j=$("#data-short"),k={},l={chart:{type:"column",renderTo:"chart_div_total"},title:{style:{fontSize:"18px",fontWeight:"bold"}},xAxis:{categories:Object.values(window.langCalendar),labels:{style:{fontSize:"16px"}}},yAxis:{title:{text:"N\xE4chte"},labels:{style:{fontSize:"16px"}}},tooltip:{hideDelay:500}};if(0===a.length)$("#chart_div_total").html("<b>Keine Daten</b>");else{for($("#datatable-short-calendar>thead").show(),j.html(""),d=0;d<c.length;d+=1){for(g=window.parseInt(c[d],10),j.append("<tr id=\"short_year_"+g+"\"></tr>"),$("#short_year_"+g).append("<td style=\"color: "+window.yearColors[g]+" !important\">"+g+"</td>"),e=1;13>e;e+=1)$("#short_year_"+g).append("<td style=\"color: "+window.yearColors[g]+" !important\" id=\""+g+"_"+GlobalFunctions.smallerThenTen(e)+"\"></td>");$("#short_year_"+g).append("<td style=\"color: "+window.yearColors[g]+" !important\" id=\"totals_year_"+g+"\"></td>")}$.each(a,function(a,b){$("#"+a).html(b)}),$.each(b,function(a,b){$("#totals_year_"+a).html(b)}),$.each($("[id^=\"short_year_\"]"),function(c,d){var e=$(d).children(":first").html();return void 0!==b[e]&&void(h.push(e),Object.keys(a).some(function(a){return~a.indexOf(e)})?$("#year_"+e).attr("data-empty","full"):$("#year_"+e).attr("data-empty","empty"),k[e]=[],$.each($(d).children(),function(a,b){var c=isNaN(window.parseInt($(b).html(),10))?0:window.parseInt($(b).html(),10);k[e].push(c)}),k[e].splice(0,1),k[e].splice(-1,1))}),f!==void 0&&f.destroy(),f=new window.Highcharts.Chart(l),f.setTitle({text:"Logiern\xE4chte Total "+h.join(", ")}),$("#chart_div_total").append("<pagebreak />"),$.each(k,function(a,b){var c=window.yearColors[a];f.addSeries({data:b,name:a,color:c})}),window.all_charts.push(f)}$("[data-empty=\"empty\"]").hide(),$("#datatable-short-calendar").DataTable(dataCalendarTableOptions)},fillTable=function(a,b){'use strict';var c,d=$("#data"),e={chart:{type:"column",renderTo:"chart_div",height:250},legend:{enabled:!1},title:{style:{fontSize:"18px",fontWeight:"bold"}},xAxis:{tickInterval:1,pointInterval:1,min:1,title:{text:"Tage"},labels:{step:1,style:{fontSize:"12px"}}},yAxis:{tickInterval:1,pointInterval:1,min:0,max:15,categories:window.monthDays,title:{text:"Logier-N\xE4chte"},labels:{style:{fontSize:"12px"}}},tooltip:{headerFormat:" ",pointFormat:"Logier-N\xE4chte am {point.x} <b>{point.y}</b>",hideDelay:500}},f=0;if(0===a[0].length)$("#chart_div").html("");else{d.html(""),prepareDataTable(b,a[2]);c!==void 0&&c.destroy(),$.each(b,function(b,d){var g,h,i,j=window.parseInt(d,10);if(a[2][j]===void 0)return!1;for(window.all_charts.push(c),g=1;13>g;g+=1){for($("#chart_div").append("<div style=\"margin-bottom: 12px; width: 33%; float: left;\" id=\"chart_year_month_"+j+"_"+g+"\"></div>"),e.chart.renderTo="chart_year_month_"+j+"_"+g,e.tooltip.pointFormat="Logier-N\xE4chte am {point.x}."+window.langCalendar[g]+" "+j+": <b>{point.y}</b>",c=new window.Highcharts.Chart(e),c.setTitle({text:"Logiern\xE4chte "+window.langCalendar[g]+" "+j}),graphDaySeries=[],h=0;32>h;h+=1)i=j+"_"+GlobalFunctions.smallerThenTen(g)+"_"+GlobalFunctions.smallerThenTen(h),$("#"+i).html(a[0][i]),void 0===a[0][i]?graphDaySeries.push(0):graphDaySeries.push(a[0][i]);f+=1,c.addSeries({data:graphDaySeries,color:window.yearColors[j]}),window.all_charts.push(c)}})}fillTableShort(a[1],a[2],b)};window.Highcharts.exportCharts=function(a,b){'use strict';b=Highcharts.merge(Highcharts.getOptions().exporting,b),window.Highcharts.post(b.url,{filename:b.filename||"chart",type:b.type,svg:window.Highcharts.getSVG(a)})},window.Highcharts.getSVG=function(a){'use strict';var b=0,c=0,d="";return $.each(a,function(a,e){var f=Math.max;if(!$.isEmptyObject(e)){var g=e.getSVG();g=g.replace("<svg","<g transform=\"translate(0,"+b+")\" "),g=g.replace("</svg>","</g>"),b=e.chartHeight,c=f(c,e.chartWidth),d+="<svg height=\""+b+"\" width=\""+c+"\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">"+g+"</svg>"}}),d},$(document).ready(function(){'use strict';for(var a=1;32>a;a+=1)monthDays.push(a);$("[name^=\"year\"]").on("change",function(){checkedYear=[],showYear=[],$.each($("[name^=\"year\"]"),function(a,b){$(b).is(":checked")&&(checkedYear.push(b.value+"-%"),showYear.push(b.value)),yearColors[b.value]=yearColorsSet[a]}),checkedYear.sort(),showYear.sort()})}),$(document).on("click","#getYears",function(){0===checkedYear.length&&$("[name^=\"year\"]").trigger("change"),window.getStatsData("/stats_calendar_total_day",checkedYear,window.fillTable)});