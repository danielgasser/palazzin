$(document).on("click","#timeliner > [id^=\"tl-\"]",function(){let a=$(this).attr("id"),b=a.split("-"),c=new Date(b[1],b[2]-1,1,0,0,0);"0"!==localStorage.getItem("new_res")&&V3Reservation.initNew($(this).attr("data-period-id"),c,!0)}),$(document).on("click","#reset_reservation",function(a){a.preventDefault(),$(window.guestsDates).remove(),$.each($("[id^=\"show_res\"]").find("input, .show_reservation:not(button)"),function(){this.hasAttribute("type")?this.value="":this.innerHTML=""}),$("#reservation_costs_total").html("0.00"),$("#reservation_guest_num_total").html("0"),$("[id^=\"clone_guest_\"]").attr("disabled",!0)}),$(document).on("change","[id^=\"reservation_guest_guests_\"]",function(){let a=$(this).attr("id").split("_")[3],b=$("#reservation_guest_num_"+a).val(),c={startDate:$("#reservation_guest_started_at_"+a).val(),endDate:$("#reservation_guest_ended_at_"+a).val()};return"0"!==$(this).val()&&""!==b?($("#clone_guest_"+a).show().attr("disabled",!1),V3Reservation.calcNights(c.startDate,c.endDate,"#number_nights_"+a),V3Reservation.calcAllPrices(),V3Reservation.setGuestHeaderText(a,c,$(this).val(),$("#reservation_guest_num_"+a).val(),$("#number_nights_"+a).text())):$("#clone_guest_"+a).show().attr("disabled",!0),"12"===$(this).value?($.each(window.userlist,function(a,b){$("#userlist").append("<li><a id=\"chooseuser_"+b.id+"\">"+b.user_login_name+"</a></li>")}),$("#guestFormClanOtherId").text(mid),$("#cross_reserv_user_list").modal({backdrop:"static",keyboard:!1}),!1):void("0"===this.value?($("#reservation_guest_price_"+a).val(""),$("#hidden_reservation_guest_price_"+a).val(""),$("#save_reservation").attr("disabled",!0)):($("#reservation_guest_price_"+a).text(window.rolesTaxes[this.value]),$("#hidden_reservation_guest_price_"+a).val(window.rolesTaxes[this.value]),$("#save_reservation").attr("disabled",!1),$("#reservation_guest_num_"+a).show().attr("disabled",!1)))}),$(document).on("click","[id^=\"chooseuser_\"]",function(){let a=$(this).attr("id").split("_"),b=$(this).text(),c=$("#guestFormClanOtherId").text();window.V3Reservation.toggleOtherHost(c,b,!1),$("#cross_reserv_user_list").modal("hide"),$("#userIdAb").val(a[1])}),$(document).on("input","[id^=\"reservation_guest_num_\"]:not(#reservation_guest_num_total)",function(){let a=parseInt($(this).attr("max"),10),b=parseInt($(this).val(),10),c="1"===window.localStorage.getItem("new_res"),d=$(this).attr("id").split("_")[3],e=window.startGuestPicker[d].datepicker("getDate"),f=window.endGuestPicker[d].datepicker("getDate"),g=$("#reservation_guest_guests_"+d).val(),h=[];if(V3Reservation.enoughBeds(d),$("#save_reservation").attr("disabled",!0),b>a&&$(this).val(a),""!==$(this).val()&&"0"!==g){for(;e<f;){let a=e.getFullYear()+"_"+GlobalFunctions.smallerThenTen(e.getMonth())+"_"+GlobalFunctions.smallerThenTen(e.getDate()),b=a.split("_").join("-"),d=0;if(c||(d=isNaN(window.parseInt(window.localStorage.getItem(b),10))?window.settings.setting_num_bed:window.parseInt(window.localStorage.getItem(b),10)),h.hasOwnProperty("freeBeds_"+a)){let b=window.parseInt(h["freeBeds_"+a],10)+parseInt($(this).val(),10);h.push({["freeBeds_"+a]:b})}else{let b=parseInt($(this).val(),10);h.push({["freeBeds_"+a]:b})}e.setDate(e.getDate()+1),$("#save_reservation").attr("disabled",!1)}let a={startDate:window.startGuestPicker[d].datepicker("getDate"),endDate:f};V3Reservation.calcNights(a.startDate,a.endDate,"#number_nights_"+d),V3Reservation.calcAllPrices(),V3Reservation.setGuestHeaderText(d,a,g,$(this).val(),$("#number_nights_"+d).text()),console.log($(this).val(),g),$("#clone_guest_"+d).show().attr("disabled",!1)}else $("[id^=\"clone_guest_\"]").show().attr("disabled",!0);V3Reservation.checkOccupiedBeds(parseInt($("#reservation_guest_num_total").text(),10))}),$(document).on("click",".dropup:not(#show-all-free-beds), .dropdown-toggle:not(#show-all-free-beds)",function(){$("#all-free-beds-container").hide(),$("#show-all-free-beds").removeClass("open")}),$(document).on("click","[id*=\"clone_guest_\"]",function(a){a.preventDefault();let b,c=$("[id^=\"guests_date_\"]").length,d=$(window.guestEntryView).html(function(a,b){return b.replace(/_0/g,"_"+c)}).attr("id","guests_date_"+c),e=window.resStartPicker.datepicker("getDate"),f=window.resEndPicker.datepicker("getDate");$("#addZeroGuest").hide(),null===e&&(e=new Date,e.setHours(0,0,0,0)),$("#guest_entries").append(d),$("#reservation_guest_num_"+c).val("1"),$("#number_nights_"+c).text(""),$("#hidden_number_nights_"+c).val(""),$("#price_"+c).text(""),$("#hidden_price_"+c).val(""),$("#reservation_guest_price_"+c).val(""),$("#guest_title_"+c).html(""),$("#clone_guest_"+c).attr("disabled",!0),b=$("#guestDates_"+c),b.datepicker(V3Reservation.datePickerSettings),window.startGuestPicker[c]=b.find("#reservation_guest_started_at_"+c),window.endGuestPicker[c]=b.find("#reservation_guest_ended_at_"+c),window.startGuestPicker[c].datepicker("setStartDate",e),window.startGuestPicker[c].datepicker("setEndDate",f),window.startGuestPicker[c].datepicker("setDate",e),window.endGuestPicker[c].datepicker("setStartDate",e),window.endGuestPicker[c].datepicker("setEndDate",f),window.endGuestPicker[c].datepicker("setDate",f),b.datepicker().on("changeDate",function(a){let b=a.target.id.split("_")[4];V3Reservation.calcNights(window.startGuestPicker[b].datepicker("getDate"),window.endGuestPicker[b].datepicker("getDate"),"#number_nights_"+b),V3Reservation.getNewBeds(),V3Reservation.calcAllPrices(),V3Reservation.setGuestHeaderText(b,{startDate:window.startGuestPicker[b].datepicker("getDate"),endDate:window.endGuestPicker[b].datepicker("getDate")},$("#reservation_guest_guests_"+b).val(),$("#reservation_guest_num_"+b).val(),$("#number_nights_"+b).text())}),0<c&&V3Reservation.calcNights(e,f,"#number_nights_"+c),$.each($("input:not([type=\"hidden\"]), select"),function(){window.allInputs.push($(this).attr("id"))})}),$(document).on("DOMSubtreeModified","#reservation_guest_num_total",function(a){a.preventDefault();$(this).attr("id").split("_").pop();parseInt(this.innerText,10)<=parseInt(window.settings.setting_num_bed)}),$(document).on("change","input:not([type=\"hidden\"]), select",function(a){a.preventDefault();let b=$(this).attr("id"),c=GlobalFunctions.arraySearch(window.allInputs,b);$("input:not([type=\"hidden\"]), select").removeClass("giveFocus"),$("#"+window.allInputs[c+1]).addClass("giveFocus")}),$(document).on("click","[id^=\"remove_guest_\"]",function(){let a=$(this).attr("id").split("_").pop();return $("#confirm_delete_guest").attr("data-id",a),$("#delete_guest").modal({backdrop:"static",keyboard:!1}),!1}),$(document).on("click","#show-all-free-beds",function(){$("#free_beds-modal").modal({backdrop:"static",keyboard:!1})}),$(document).on("click","#clearReservation",function(){location.reload()}),$(document).on("click","#cancel_reservation_exists",function(){let a={startDate:window.resStartPicker.datepicker("getDate"),endDate:window.resEndPicker.datepicker("getDate")};return V3Reservation.adaptChanged(a,window.endDate,!0),$("#reservation_exists").hide(),!0}),$(document).on("click","#confirm_delete_guest",function(){let a=$("#confirm_delete_guest").attr("data-id"),b={start:null,end:null};$("#delete_guest").modal("hide"),$("#guests_date_"+a).remove(),0===$("[id^=\"guests_date_\"]").length&&($("#addZeroGuest").show(),$("#save_reservation").attr("disabled",!1)),$.each($("[id^=\"guests_date_\"]"),function(a,b){let c=$(b).find("*"),d=$(this).attr("id").split("_");d.pop(),$(this).attr("id",d.join("_")+"_"+a),$.each(c,function(){if($(this).attr("id")!==void 0){let b=$(this).attr("id").split("_");b.pop(),$(this).attr("id",b.join("_")+"_"+a)}})}),window.startGuestPicker.splice(a,1),window.endGuestPicker.splice(a,1),$("[id^=\"reservation_guest_num_\"]:not(#reservation_guest_num_total)").trigger("input");for(let a=0;a<window.startGuestPicker.length;a++)b.startDate=window.startGuestPicker[a].datepicker("getDate"),b.endDate=window.endGuestPicker[a].datepicker("getDate"),V3Reservation.calcNights(b.startDate,b.endDate,"#reservation_nights_total"),V3Reservation.setReservationHeaderText("#res_header_text",b,$("#reservation_nights_total").text()),V3Reservation.checkOccupiedBeds(parseInt($("#reservation_guest_num_total").text(),10));$("[id^=\"clone_guest\"]").attr("disabled",!1)}),$(document).on("click","[id^=\"delete_reservation_\"]",function(a){a.preventDefault();let b=$(this).attr("id").split("_")[2];$("#deleteRes").attr("data-id",b),$("#delete_reservation").modal({backdrop:"static",keyboard:!1})}),$(document).on("click","#deleteRes",function(a){a.preventDefault();let b=$(this).data("id");$("#delete_reservation").modal("hide"),V3Reservation.deleteReservation(b)}),$(document).on("changeDate","#reservation_ended_at",function(){V3Reservation.getNewResBeds()}),$(document).on("click","#reservation_ended_at",function(){V3Reservation.firstTimeChangeEndDate++}),$(document).on("click","[id^=\"hider_\"]",function(){let a=$(this).attr("id").split("_")[1];$("#guests_date_"+a).find("[class^=\"col-\"]:not(.no-hide)").slideToggle("slow"),$(this).children("#hide_guest_"+a).toggleClass("fa-caret-down"),$(this).children("#hide_guest_"+a).toggleClass("fa-caret-up")}),$(document).on("click","[id^=\"hide_all_res\"]",function(){$("[id^=\"show_res\"]").find("[class^=\"col-\"]").not("#res_info").slideToggle("slow"),$(this).children("span").toggleClass("fa-caret-down"),$(this).children("span").toggleClass("fa-caret-up");let a=$("#hide_res").hasClass("fa-caret-up");$.each($("[id^=\"guests_date_\"]"),function(b,c){a?($(c).find("[class^=\"col-\"]:not(.no-hide)").slideDown("slow"),$("#hide_guest_"+b).addClass("fa-caret-up").removeClass("fa-caret-down")):($(c).find("[class^=\"col-\"]:not(.no-hide)").slideUp("slow"),$("#hide_guest_"+b).addClass("fa-caret-down").removeClass("fa-caret-up"))})}),$(document).on("input propertychange paste","[id^=\"number_nights_\"]",function(){var a=$(this).attr("id").split("_")[2];$("#hidden_number_nights_"+a).val($(this).text())}),$(document).on("input propertychange paste change","[id^=\"price_\"]",function(){let a=$(this).attr("id").split("_")[1];$("#hidden_price_"+a).val(parseInt($("#reservation_guest_price_"+a).text(),10))}),$("#ap-component-0>.ap-component-cont>.ap-component-data").data("horizontal",0).data("vertical",0).on("scroll",function(){}),$(document).on("#save_reservation",function(a){a.preventDefault()});