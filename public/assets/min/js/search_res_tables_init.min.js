var searchSortPaginate=function(a,b,c,d,e,f,g,h){"use strict";var i=g,j=void 0!==h||""===h?h:"";$.ajax({type:"GET",url:a,data:{search_field:b,sort_field:d,order_by:e,page:f,start:c,user_id:$("#user_id").val(),monthyear:j},success:function(a){console.log(a),i(a)}})},urlTop=window.thatRoute.indexOf("admin")>-1?"/admin/reservations/search":"/user/reservations/search",fillKeeperTable=function(a){"use strict";var b="";return void 0===a||0===a.length?($("#keeperData").html("Keine Daten"),!1):($.each(a,function(a,c){b+="<tr><td>"+c.user_first_name+"</td><td>"+c.user_name+"</td><td>"+c.reservation_started_at_show+"</td><td>"+c.reservation_ended_at_show+"</td><td>"+c.reservation_nights+"</td><td>",0===c.guests.length?b+=window.langRes.guest_many_no_js.none:(b+='<table class="table" id="allGuests_{{$r->id}}"><thead><tr><th>'+window.langRes.guests.number+"</th><th>"+window.langRes.guests.role+"</th><th>"+window.langRes.guests.tax_night+"</th></tr></thead><tbody>",$.each(c.guests,function(a,c){b+="<tr><td>"+c.guest_number+"</td><td>"+c.role_code+"</td><td>"+c.role_tax_night+"</td></tr>"}),b+="</tbody></table>"),b+="</td></tr>"}),void $("#keeperData").html(b))};$(document).ready(function(){"use strict";var a=(window.settings.setting_calendar_start.split(" ")[0],$("#year")),b=$("#month");window.yl=window.createYearList(),window.ml=window.createMonthList(),window.fillSelect(b,window.ml,!1,"",!0),window.fillSelect(a,window.yl,!0,"",!0),a.val("x"),b.val("x"),"user/reservations"!==window.route&&$("#searchIt").chosen({no_results_text:"Keine Eintr√§ge gefunden",enable_split_word_search:!0,search_contains:!0})}),$(document).on("click","#resetUserDropDown",function(a){"use strict";$("#searchIt").val(""),$("#month").val(null),$("#year").val(null),window.location.reload()}),$("#searchKeeper").on("click",function(){"use strict";var a,b,c=$("#searchIt")[0].selectedOptions[0].value,d="x"!==$("#year").val()?$("#year").val():null,e="x"!==$("#month").val()?$("#month").val():null;null===d&&(b="-"+window.smallerThenTen(parseInt(e,10)+1)+"-"),null===e&&(b=window.smallerThenTen(parseInt(d,10))+"-"),null!==d&&null!==e&&(a=d+"-"+window.smallerThenTen(parseInt(e,10)+1)+"-01"),null===d&&null===e&&(b=""),searchSortPaginate(urlTop,c,a,"user_name","DESC","",fillKeeperTable,b)}),$(window.a).bind("sortStart",function(a){"use strict";$("#keeperData").html("")}),$(window.a).bind("sortEnd",function(a){"use strict";var b,c,d=$("#searchIt")[0].selectedOptions[0].value,e=a.target.config.sortList[0],f=$($(".sortCols")[e[0]]).attr("id"),g=1===e[1]?"ASC":"DESC",h="x"!==$("#year").val()?$("#year").val():null,i="x"!==$("#month").val()?$("#month").val():null;console.log(f,e,$(".sortCols"),a.target.config.sortList),null===h&&(c="-"+window.smallerThenTen(parseInt(i,10)+1)+"-"),null===i&&(c=window.smallerThenTen(parseInt(h,10))+"-"),null!==h&&null!==i&&(b=h+"-"+window.smallerThenTen(parseInt(i,10)+1)+"-01"),null===h&&null===i&&(c=""),console.log(f),console.log(g),searchSortPaginate(urlTop,d,b,f,g,"",fillKeeperTable,c)});