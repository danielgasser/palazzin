var nonHtml5InputsSet=!1,isDate=function(a,b,c){"use strict";var d=$(a)[0],e=$(b)[0];return""===c.value||void 0===c.value?(c.value=c.id.indexOf("started")>-1?$(d).attr("data_year")+"-"+window.smallerThenTen(parseInt($(d).attr("data_month"),10)+1)+"-"+$(d).attr("data_date"):$(e).attr("data_year")+"-"+window.smallerThenTen(parseInt($(e).attr("data_month"),10)+1)+"-"+$(e).attr("data_date"),!1):!0},counterCalcCollection=function(a,b,c){"use strict";window.Reservation.nightCounter(a,b,c),window.Reservation.guestCounter(),window.Reservation.calcGuestsTotals(c),window.Reservation.freeBedChecker(a,b,c),window.Reservation.calcReservationTotals()};jQuery(document).ready(function(){"use strict";jQuery(document).on("change",'#show_reservation_started_at, #show_reservation_ended_at, #reservation_started_at, #reservation_ended_at, [name="reservation_started_at"], [name="reservation_ended_at"]',function(){var a=$('[name="reservation_started_at"]'),b=$('[name="reservation_ended_at"]'),c=a.val().split("-"),d=b.val().split("-"),e=c[0]+"_"+window.smallerThenTen(window.parseInt(c[1],10)-1)+"_"+c[2],f=d[0]+"_"+window.smallerThenTen(window.parseInt(d[1],10)-1)+"_"+d[2],g=new Date(Date.UTC(c[0],c[1]-1,c[2],0,0,0,0)),h=new Date(Date.UTC(d[0],d[1]-1,d[2],0,0,0,0));window.Reservation.checkNegativeDates(g,h),$("#saveEditReserv").attr("disabled",!1),window.Reservation.nightCounter(g,h),$.each($('[name^="reservation_guest_started_at"]'),function(b,c){var d=$(c).attr("id").split("_"),e="#show_"+$(c).attr("id"),f=d[d.length-1],i=$(c).val().split("-"),j=new Date(Date.UTC(i[0],i[1]-1,i[2],0,0,0,0));g.getTime()>j.getTime()&&a.val()!==$(c).val()&&($(c).val(a.val()),window.Modernizr.inputtypes.date||$(e).datepicker("setDate",g),window.Reservation.nightCounter(g,h,f))}),$.each($('[name^="reservation_guest_ended_at"]'),function(a,c){var d=$(c).attr("id").split("_"),e="#show_"+$(c).attr("id"),f=d[d.length-1],i=$(c).val().split("-"),j=new Date(Date.UTC(i[0],i[1]-1,i[2],0,0,0,0));h.getTime()<j.getTime()&&b.val()!==$(c).val()&&($(c).val(b.val()),window.Modernizr.inputtypes.date||$(e).datepicker("setDate",$(c).val()),window.Reservation.nightCounter(g,h,f)),window.Reservation.calcGuestsTotals(f,$("#reservation_guest_role_tax_night_"+f).val())}),window.localStorage.setItem("startDate",e),window.localStorage.setItem("endDate",f),window.Reservation.calcReservationTotals(),window.Reservation.addClickedDays(null)}),jQuery(document).on("change",'[id^="show_reservation_guest_started_at_"], [id^="show_reservation_guest_ended_at_"], [id^="reservation_guest_started_at_"], [id^="reservation_guest_ended_at_"]',function(){{var a,b,c,d,e=$(this).attr("id").split("_"),f=e[e.length-1];$("#reservation_guest_ended_at_"+f).val().indexOf("-")>-1?"-":"."}window.Modernizr.inputtypes.date?(a=$("#reservation_guest_started_at_"+f).val().split("-"),b=$("#reservation_guest_ended_at_"+f).val().split("-")):(a=$('[name="show_reservation_guest_started_at_'+f+'"]').val().split("."),b=$('[name="show_reservation_guest_ended_at_'+f+'"]').val().split(".")),window.Modernizr.inputtypes.date?(c=new Date(Date.UTC(a[0],a[1]-1,a[2],0,0,0,0)),d=new Date(Date.UTC(b[0],b[1]-1,b[2],0,0,0,0))):(c=new Date(Date.UTC(a[2],a[1]-1,a[0],0,0,0,0)),d=new Date(Date.UTC(b[2],b[1]-1,b[0],0,0,0,0))),c.setHours(1),window.Reservation.checkNegativeDates(c,d),counterCalcCollection(c,d,f)}),jQuery(document).on("change",'[id^="reservation_guest_num_"]',function(){if(isNaN(parseInt(this.value,10))||""===this.value)return $("#guest_nan").modal({backdrop:"static",keyboard:!1}),!1;var a,b,c,d,e=$(this).attr("id").split("_"),f=e[e.length-1];a=$("#reservation_guest_started_at_"+f).val().split("-"),b=$("#reservation_guest_ended_at_"+f).val().split("-"),c=new Date(Date.UTC(a[0],a[1]-1,a[2],0,0,0,0)),d=new Date(Date.UTC(b[0],b[1]-1,b[2],0,0,0,0)),"0"!==$("#reservation_guest_guests_"+f).val()&&($("#addGuest").attr("disabled",!1),$("#saveEditReserv").attr("disabled",!1)),"0"!==$(this).val()&&"0"!==$("#reservation_guest_guests_"+f).val()&&$("#guestForm").length>0&&$('[id^="reservation_guest_save_nights_"]').last().attr("disabled",!1),counterCalcCollection(c,d,f)}),jQuery(document).on("change",'[id^="reservation_guest_guests_"]',function(){var a,b,c,d,e=$(this).attr("id").split("_"),f=e[e.length-1];return a=$("#reservation_guest_started_at_"+f).val().split("-"),b=$("#reservation_guest_ended_at_"+f).val().split("-"),c=new Date(Date.UTC(a[0],a[1]-1,a[2],0,0,0,0)),d=new Date(Date.UTC(b[0],b[1]-1,b[2],0,0,0,0)),window.Reservation.calcGuestsTotals(f),$("#saveEditReserv").attr("disabled",!1),"12"===$(this).val()?($.each(window.userlist,function(a,b){$("#userlist").append('<li><a id="chooseuser_'+b.id+'">'+b.user_login_name+"</a></li>")}),$("#guestFormClanOtherId").text(f),$("#cross_reserv_user_list").modal({backdrop:"static",keyboard:!1}),!1):("0"!==$(this).val()&&$("#guestForm").length>0?($('[id^="reservation_guest_save_nights_"]').last().attr("disabled",!1),$("#reservation_guest_num_"+f).attr("disabled",!1),$("#addGuest").attr("disabled",!1),$("#saveEditReserv").attr("disabled",!1)):($('[id^="reservation_guest_save_nights_"]').last().attr("disabled",!0),$("#reservation_guest_num_"+f).attr("disabled",!0)),window.Reservation.toggleOtherHost(f,"",!0),void counterCalcCollection(c,d,f))}),jQuery(document).on("click",'#addGuest, [id^="reservation_guest_save_nights_"]',function(a){a.preventDefault(),$(this).closest("fieldset").removeClass("new"),window.Reservation.addGuestsForm({})}),jQuery(document).on("click",'[id^="deleteGuest_"]',function(a){a.preventDefault();var b=$(this).attr("id").split("_")[1],c=window.parseInt($('[id^="deleteGuest_"]').length,10)-1;"12"===$("#reservation_guest_guests_"+b).val()&&$("#userIdAb").val(""),window.Reservation.deleteGuest($("#reservation_guest_num_"+b).val(),$("#reservation_guest_started_at_"+b).val(),$("#reservation_guest_ended_at_"+b).val(),$("#reserv_guest_id_"+b).val(),b),$("#guestFormID_"+b).remove(),$("#addGuest").attr("disabled",!1),"0"!==$("#reservation_guest_guests_"+c).val()&&$("#saveEditReserv").attr("disabled",!1),$('[id^="reservation_guest_save_nights_"]').last().attr("disabled",!1),window.Reservation.calcReservationTotals(),window.Reservation.guestCounter()}),jQuery(document).on("change",'[id^="reservation_guest_guests_"], [id^="reservation_guest_guests_"]',function(){{var a=$(this).attr("id").split("_");a[a.length-1]}}),jQuery(document).on("click","#saveEditReserv",function(a){$.each($('[id^="reservation_guest_guests_"]'),function(b,c){return"0"===c.value?($("#guest_empty").modal({backdrop:"static",keyboard:!1}),a.preventDefault(),!1):void 0}),$.ajax({type:"POST",url:"reservation/session",data:{data_value:window.localStorage},success:function(a){window.console.log(a)}})}),jQuery(document).on("click",'[id^="chooseuser_"]',function(){var a=$(this).attr("id").split("_"),b=$(this).text(),c=$("#guestFormClanOtherId").text();window.Reservation.toggleOtherHost(c,b,!1),$("#cross_reserv_user_list").modal("hide"),$("#userIdAb").val(a[1])})});