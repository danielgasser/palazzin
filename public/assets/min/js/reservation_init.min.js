var firstCss=window.Reservation.firstAddedReservationCss,lastCss=window.Reservation.lastAddedReservationCss,interCss=window.Reservation.addedReservationCss,calDays,timer,firstEvent=0,lastEvent=firstEvent+1,cCounter=0,inputDate=document.querySelector('input[type="date"]'),inputNum=document.querySelector('input[type="number"]');inputDate.oninvalid=function(a){"use strict";a.target.setCustomValidity(""),a.target.validity.valid||a.target.setCustomValidity(window.langRes.warnings.not_in_period)},jQuery(document).ready(function(){"use strict";$("#choosenDates").hasOwnProperty("name")||($("#choosenDates").html(window.langRes.no_chosen_dates).addClass("btn-default").removeClass("btn-success"),$("#reset_res").addClass("btn-default").removeClass("btn-success")),jQuery("#calendar").Calendar({locale:window.locale,globalSettings:window.settings,weekDayNames:window.weekdayNames,weekdayShortNames:window.weekdayShortNames}),jQuery(document).on("click","#goReservTo_",function(a){var b,c,d,e,f,g,h,i,j=window.not_invited,k={day:"numeric",month:"long",year:"numeric"},l=$(this).parent().parent().children().eq(1)[0].classList;if(i=$('[class^="otherHost"]'),0===i.length){if($(this).parent().parent().text().indexOf(window.langDialog.edit)>-1)return $("#cross_reserv").modal({backdrop:"static",keyboard:!1}),!1;window.Reservation.showNewEditReservation(null)}else{if(b=$(i[0]).attr("id").split("_"),c=$(i[$(i).length-1]).attr("id").split("_"),d=new Date(b[1],b[2],b[3],0,0,0,0),e=new Date(c[1],c[2],c[3],0,0,0,0),f=$('[class^="guessWho_"]').children().eq(0).children().eq(0).text(),h={user:f,start:d.toLocaleDateString(k,window.lc),end:e.toLocaleDateString(k,window.lc)},g=j.replace(/user|start|end/gi,function(a){return h[a]}),$("#not_invited_text").html(g),$.inArray("reserv-btn",l)>-1)return $("#not_invited").modal({backdrop:"static",keyboard:!1}),!1;$("#existentResId").val(l[1].length>0?l[1].split("_")[1]:""),$("#userIdAb").val(l[0].length>0?l[0].split("_")[1]:"xx"),window.Reservation.showNewEditReservation(null)}}),jQuery(document).on("click","#deleteEditReserv",function(){$("#delete_reservation").modal({backdrop:"static",keyboard:!1})}),jQuery(document).on("click","#reset_storage",function(){window.localStorage.clear(),window.location.reload()}),$.datepicker.setDefaults({showOn:"focus",buttonImageOnly:!1,buttonText:"",showButtonPanel:!1}),window.Modernizr.inputtypes.date||$.datepicker.setDefaults($.datepicker.regional[window.locale.split("-")[0]]),jQuery(document).on("click","#deleteRes",function(a){a.preventDefault(),window.Reservation.deleteReservation($("#res_id").val()),window.Reservation.removeGuestForm(),window.toggleStuff($("#editReservMenu")),cCounter=0}),jQuery(document).on("click",'[id^="editThisReserv_"]',function(a){a.preventDefault();var b=$(this).attr("id").split("_")[1];window.Reservation.editReservation(!1,b),$("#leg h4").html(window.langRes.edit_res)}),jQuery(document).on("click","#cancelEditReserv",function(a){a.preventDefault(),window.Reservation.removeGuestForm(),window.toggleStuff($("#editReservMenu")),$.each($('input[type="date"]'),function(a,b){$(b).removeClass("hasDatepicker")}),$("#reset_res").trigger("click"),window.Modernizr.inputtypes.date||window.location.reload()}),jQuery(document).on("click","#test",function(a){a.preventDefault(),window.localStorage.clear()}),jQuery(document).on("click","#cancel_no_free_beds",function(a){a.preventDefault(),$('[id^="reservation_guest_save_nights_"]').last().attr("disabled",!1),$("#addGuest").attr("disabled",!1)}),jQuery(document).on("s",'input[type="date"]',function(a){this.value;a.target.setCustomValidity(""),a.target.validity.valid||a.target.setCustomValidity(window.langRes.warnings.not_in_period)}),jQuery(document).on("submit","form",function(a){var b=$('[name="reservation_started_at"]').val().split("-"),c=new Date(Date.UTC(b[0],b[1]-1,b[2],0,0,0,0));window.setCurrentCalendarDate(c),window.putCalendarDateToSession(c),$("#reset_res").trigger("click")})});